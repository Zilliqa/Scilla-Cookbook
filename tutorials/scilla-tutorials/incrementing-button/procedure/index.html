<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.6">
<title data-react-helmet="true">Procedures | Scilla Cookbook</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:image" content="https://scilla-cookbook.org/img/site/meta.jpg?v=1"><meta data-react-helmet="true" name="twitter:image" content="https://scilla-cookbook.org/img/site/meta.jpg?v=1"><meta data-react-helmet="true" property="og:url" content="https://scilla-cookbook.org/tutorials/scilla-tutorials/incrementing-button/procedure"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Procedures | Scilla Cookbook"><meta data-react-helmet="true" name="description" content="A `procedure` is a way to define logic that interacts with the contract state. Procedures are not part of the public interface of the contract, and may not be invoked by sending a message to the contract. The only way to invoke a procedure is to call it from an internal `transition` or from another internal `procedure`."><meta data-react-helmet="true" property="og:description" content="A `procedure` is a way to define logic that interacts with the contract state. Procedures are not part of the public interface of the contract, and may not be invoked by sending a message to the contract. The only way to invoke a procedure is to call it from an internal `transition` or from another internal `procedure`."><link data-react-helmet="true" rel="shortcut icon" href="/img/site/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://scilla-cookbook.org/tutorials/scilla-tutorials/incrementing-button/procedure"><link data-react-helmet="true" rel="alternate" href="https://scilla-cookbook.org/tutorials/scilla-tutorials/incrementing-button/procedure" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://scilla-cookbook.org/tutorials/scilla-tutorials/incrementing-button/procedure" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.3db205b2.css">
<link rel="preload" href="/assets/js/runtime~main.41439d61.js" as="script">
<link rel="preload" href="/assets/js/main.a4124b3c.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/site/scilla-200.png" alt="Community Scilla Cookbook" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/site/scilla-200.png" alt="Community Scilla Cookbook" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">Community Scilla Cookbook</b></a><a href="https://discord.gg/nKznfCaZxy" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://t.me/ZilliqaDevs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Telegram<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://scilla.readthedocs.io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Scilla Docs<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://ide.zilliqa.com/#/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Scilla IDE<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://github.com/Zilliqa/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/Zilliqa/Scilla-by-Example" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Community Cookbook Github<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle toggle_3Zt9 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/">Community Scilla Cookbook</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Recipes</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Side Knowledge</a></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Tutorials</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#" tabindex="0">Scilla Tutorials</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#" tabindex="0">IncrementingButton</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/tutorials/scilla-tutorials/incrementing-button/introduction">Introduction</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/tutorials/scilla-tutorials/incrementing-button/constructor">Constructor name</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/tutorials/scilla-tutorials/incrementing-button/versionheader">Version headers</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/tutorials/scilla-tutorials/incrementing-button/mutable-parameters">State and constants</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/tutorials/scilla-tutorials/incrementing-button/procedure">Procedures</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/tutorials/scilla-tutorials/incrementing-button/error-handling">Error handling</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/tutorials/scilla-tutorials/incrementing-button/transition">Transitions</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/tutorials/scilla-tutorials/incrementing-button/events">Events</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/tutorials/scilla-tutorials/incrementing-button/local-testing">Testing the button</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Interaction Tutorials</a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD theme-doc-toc-mobile tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Procedures</h1></header><p>A <code>procedure</code> is a way to define logic that interacts with the contract state. Procedures are not part of the public interface of the contract, and may not be invoked by sending a message to the contract. The only way to invoke a procedure is to call it from an internal <code>transition</code> or from another internal <code>procedure</code>.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>Consider procedures as private encapuslation scope.</p></div></div><p>Procedures in a contract are declared through keyword <code>procedure</code>. A procedure declaration is followed by the name of the procedure. The below example the procedure is called <code>ExampleProcedure</code>.</p><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</h5></div><div class="admonition-content"><p>The standard convention to writing procedure names is in PascalCase and snake_case for constants or state</p></div></div><p>The arguments to be passed to the procedure are wrapped within  <code>()</code>. The below example defines one parameter where <code>vname</code> is the argument name and <code>vtype</code> is its type.  Mutiple parameters are delimited with a  <code>,</code>. Procedures indicate the end of processing by providing the keyword <code>end</code>.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ocaml"><pre tabindex="0" class="prism-code language-ocaml codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">procedure </span><span class="token module variable" style="color:#36acaa">ExampleProcedure</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">vname</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> vtype</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">end</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="incrementingbutton"></a>IncrementingButton<a class="hash-link" href="#incrementingbutton" title="Direct link to heading">#</a></h2><p>Lets improve <code>IncrementingButton</code> by defining some <code>procedures</code> that will handle the logic of our contract.</p><p>Remembering the scope of the brief, you stub out procedures which will define the logic for each requirement. We will use these procedures as atomic code blocks later in the public transitions. Atomic code helps reduce repeating code when building complex behaviour.</p><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</h5></div><div class="admonition-content"><p>Typically procedures with &#x27;Is XXX&#x27; throw errors, allowing contracts to stop execution while procedures defined as &#x27;DoSomething&#x27; performs an action.</p></div></div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ocaml"><pre tabindex="0" class="prism-code language-ocaml codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">procedure </span><span class="token module variable" style="color:#36acaa">IsContractOwner</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">end</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">procedure </span><span class="token module variable" style="color:#36acaa">IncrementCounter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">end</span><span class="token plain"> </span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">procedure </span><span class="token module variable" style="color:#36acaa">IsPreviousClicker</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">new_clicker</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token module variable" style="color:#36acaa">ByStr20</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">end</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">procedure </span><span class="token module variable" style="color:#36acaa">SetNewClicker</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">new_clicker</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token module variable" style="color:#36acaa">ByStr20</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">end</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">procedure </span><span class="token module variable" style="color:#36acaa">ContractOwnerResetButton</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">end</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="iscontractowner"></a>IsContractOwner<a class="hash-link" href="#iscontractowner" title="Direct link to heading">#</a></h3><p><code>IsContractOwner</code> will check the calling address against what was deployed out with the contract. If these addresses are not equal then it will raise an error.
<code>_sender</code>  is a builtin variable which captures the calling addresses value. It&#x27;s more secure to use <code>_sender</code> than passing an address that can be defined with a transition call.</p><p><code>IsContractOwner</code> uses <code>builtin eq</code> to compare <code>contract_owner</code> to <code>_sender</code> and returns the bool value to <code>is_contract_owner</code>.</p><p>Using pattern matching, we can write a basic function with the pattern <code>match type_variable with | type =&gt;</code>. We can now branch depending if that is true or false.</p><p>For now, we will leave these empty, but know we will want to throw an error later for the false path.</p><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</h5></div><div class="admonition-content"><p>Writing code comments helps others easily understand what is happening in your contract</p></div></div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ocaml"><pre tabindex="0" class="prism-code language-ocaml codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">(*</span></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">  @Dev : Throws an error if &#x27;_sender&#x27; is not &#x27;contract_owner&#x27;</span></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">*)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">procedure </span><span class="token module variable" style="color:#36acaa">IsContractOwner</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  is_contract_owner </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> builtin eq contract_owner _sender</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">match</span><span class="token plain"> is_contract_owner </span><span class="token keyword" style="color:#00009f">with</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token module variable" style="color:#36acaa">True</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">(* Continue contract execution *)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token module variable" style="color:#36acaa">False</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">(* Throw error - Stop execution *)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">end</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">end</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="incrementcounter"></a>IncrementCounter<a class="hash-link" href="#incrementcounter" title="Direct link to heading">#</a></h3><p><code>IncrementCounter</code> will increment the counter by one everytime its called. We plan to only use this procedure after we&#x27;ve verified the caller is unique.</p><p>We read the value of our mutable counter with the similar syntax as above, using the <code>&lt;-</code> returning a new local variable. We then use the <code>builtin add</code> command to then add <code>uint128_one</code> and <code>total_count_clicks</code> together. This value is returned as a new variable called <code>new_click_count</code>. Lastly, using the pattern <code>state_type := new_state</code> the state of the contract can be written to, in our case the state is updated with count + 1.</p><div class="admonition admonition-caution alert alert--warning"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</h5></div><div class="admonition-content"><p>Take note how the last statement line of the statement is not terminated with a semi-colon.</p><p>If this line ended with a semi-colon, the contract would fail to compile with the error <code>What follows the statement was unexpected, for example possibly a statement or termination is expected.</code></p></div></div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ocaml"><pre tabindex="0" class="prism-code language-ocaml codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">(*  </span></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">  Dev: Increments &#x27;current_clicker&#x27; by &#x27;uint128_one&#x27;</span></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">*)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">procedure </span><span class="token module variable" style="color:#36acaa">IncrementCounter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  previous_click_count </span><span class="token operator" style="color:#393A34">&lt;-</span><span class="token plain"> total_count_clicks</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">(* get the state *)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  new_click_count </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> builtin add previous_click_count uint128_one</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">(* add one *)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  total_count_clicks </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> new_click_count </span><span class="token comment" style="color:#999988;font-style:italic">(* set the state *)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">end</span><span class="token plain"> </span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="ispreviousclicker"></a>IsPreviousClicker<a class="hash-link" href="#ispreviousclicker" title="Direct link to heading">#</a></h3><p><code>IsPreviousClicker</code> defines the logic that checks if the current caller was the last caller.  If these addresses are equal to each other then we should throw an error, otherwise it&#x27;s a unique address. For now, we will define these as empty, but know we will want to throw an error later for the true path.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ocaml"><pre tabindex="0" class="prism-code language-ocaml codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">(*  </span></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">  Dev: Throws an error if the current &#x27;_sender&#x27; is the previous &#x27;current_clicker&#x27;</span></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">*)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">procedure </span><span class="token module variable" style="color:#36acaa">IsPreviousClicker</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">new_clicker</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token module variable" style="color:#36acaa">ByStr20</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  previous_clicker </span><span class="token operator" style="color:#393A34">&lt;-</span><span class="token plain"> current_clicker</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  is_previous_clicker </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> builtin eq previous_clicker _sender</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">match</span><span class="token plain"> is_previous_clicker </span><span class="token keyword" style="color:#00009f">with</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token module variable" style="color:#36acaa">True</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">(* Throw error - Stop execution *)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token module variable" style="color:#36acaa">False</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">(* Continue contract execution *)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">end</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">end</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="setnewclicker"></a>SetNewClicker<a class="hash-link" href="#setnewclicker" title="Direct link to heading">#</a></h3><p><code>SetNewClicker</code> takes an address called <code>new_clicker</code> and sets it to the current clicker. We could have used <code>_sender</code> as another valid alternative to <code>new_clicker</code>.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ocaml"><pre tabindex="0" class="prism-code language-ocaml codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">(*  </span></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">  Dev: Sets &#x27;new_clicker&#x27; as &#x27;current_clicker&#x27;</span></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">*)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">procedure </span><span class="token module variable" style="color:#36acaa">SetNewClicker</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">new_clicker</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token module variable" style="color:#36acaa">ByStr20</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  current_clicker </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> new_clicker</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">end</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="contractownerresetbutton"></a>ContractOwnerResetButton<a class="hash-link" href="#contractownerresetbutton" title="Direct link to heading">#</a></h3><p><code>ContractOwnerResetButton</code> sets the mutible state <code>total_count_click</code> variable to zero.</p><div class="admonition admonition-danger alert alert--danger"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>danger</h5></div><div class="admonition-content"><p>When procedures define actions that change the state of the contract, developers should be extra mindful about unauthorised permissions. What if anyone could call <code>ContractOwnerResetButton</code>?</p></div></div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ocaml"><pre tabindex="0" class="prism-code language-ocaml codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">(*  </span></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">  Dev: Resets &#x27;current_clicker&#x27; to &#x27;uint128_zero&#x27;</span></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">*)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">procedure </span><span class="token module variable" style="color:#36acaa">ContractOwnerResetButton</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  total_count_clicks  </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> uint128_zero</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">end</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="incrementingbutton-review"></a>IncrementingButton review<a class="hash-link" href="#incrementingbutton-review" title="Direct link to heading">#</a></h3><p>In this section we have defined internal procedure logic to interact with our state parameters. Since procedures only allow for procedures and transitions to call them and we have none, this contract does not allow for the button to be pressed - though we have the parts to create the button.</p><p>In the next section we will write some addtional logic to handle the two errors we&#x27;ve identified we want to throw.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ocaml"><pre tabindex="0" class="prism-code language-ocaml codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">scilla_version </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">library </span><span class="token module variable" style="color:#36acaa">IncrementingButton</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> uint128_zero </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token module variable" style="color:#36acaa">Uint128</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> uint128_one  </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token module variable" style="color:#36acaa">Uint128</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">contract </span><span class="token module variable" style="color:#36acaa">IncrementingButton</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  contract_owner</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token module variable" style="color:#36acaa">ByStr20</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">field current_clicker    </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token module variable" style="color:#36acaa">ByStr20</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> contract_owner</span></span><span class="token-line" style="color:#393A34"><span class="token plain">field total_count_clicks </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token module variable" style="color:#36acaa">Uint128</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> uint128_zero</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">(*</span></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">  @Dev : Throws an error if &#x27;_sender&#x27; is not &#x27;contract_owner&#x27;</span></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">*)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">procedure </span><span class="token module variable" style="color:#36acaa">IsContractOwner</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  is_contract_owner </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> builtin eq contract_owner _sender</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">match</span><span class="token plain"> is_contract_owner </span><span class="token keyword" style="color:#00009f">with</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token module variable" style="color:#36acaa">True</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token module variable" style="color:#36acaa">False</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">end</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">end</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">(*  </span></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">  Dev: Increments &#x27;current_clicker&#x27; by &#x27;uint128_one&#x27;</span></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">*)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">procedure </span><span class="token module variable" style="color:#36acaa">IncrementCounter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  previous_click_count </span><span class="token operator" style="color:#393A34">&lt;-</span><span class="token plain"> total_count_clicks</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  new_click_count </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> builtin add previous_click_count uint128_one</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  total_count_clicks </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> new_click_count</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">end</span><span class="token plain"> </span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">(*  </span></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">  Dev: Throws an error if the current &#x27;_sender&#x27; is the previous &#x27;current_clicker&#x27;</span></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">*)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">procedure </span><span class="token module variable" style="color:#36acaa">IsPreviousClicker</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">new_clicker</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token module variable" style="color:#36acaa">ByStr20</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  previous_clicker </span><span class="token operator" style="color:#393A34">&lt;-</span><span class="token plain"> current_clicker</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  is_previous_clicker </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> builtin eq previous_clicker _sender</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">match</span><span class="token plain"> is_previous_clicker </span><span class="token keyword" style="color:#00009f">with</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token module variable" style="color:#36acaa">True</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token module variable" style="color:#36acaa">False</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">end</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">end</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">(*  </span></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">  Dev: Sets &#x27;new_clicker&#x27; as &#x27;current_clicker&#x27;</span></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">*)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">procedure </span><span class="token module variable" style="color:#36acaa">SetNewClicker</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">new_clicker</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token module variable" style="color:#36acaa">ByStr20</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  current_clicker </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> new_clicker</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">end</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">(*  </span></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">  Dev: Resets &#x27;current_clicker&#x27; to &#x27;uint128_zero&#x27;</span></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">*)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">procedure </span><span class="token module variable" style="color:#36acaa">ContractOwnerResetButton</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  total_count_clicks  </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> uint128_zero</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">end</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/Zilliqa/Scilla-Cookbook/tree/master/docs/tutorials/scilla-tutorials/incrementing-button/procedure.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_13-_"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/tutorials/scilla-tutorials/incrementing-button/mutable-parameters"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« State and constants</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/tutorials/scilla-tutorials/incrementing-button/error-handling"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Error handling Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#incrementingbutton" class="table-of-contents__link">IncrementingButton</a><ul><li><a href="#iscontractowner" class="table-of-contents__link">IsContractOwner</a></li><li><a href="#incrementcounter" class="table-of-contents__link">IncrementCounter</a></li><li><a href="#ispreviousclicker" class="table-of-contents__link">IsPreviousClicker</a></li><li><a href="#setnewclicker" class="table-of-contents__link">SetNewClicker</a></li><li><a href="#contractownerresetbutton" class="table-of-contents__link">ContractOwnerResetButton</a></li><li><a href="#incrementingbutton-review" class="table-of-contents__link">IncrementingButton review</a></li></ul></li></ul></div></div></div></div></main></div></div></div>
<script src="/assets/js/runtime~main.41439d61.js"></script>
<script src="/assets/js/main.a4124b3c.js"></script>
</body>
</html>