<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.6">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","G-GZV0S5106J","auto"),ga("set","anonymizeIp",!0),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script><title data-react-helmet="true">Muti-signature contracts | Scilla Cookbook</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:image" content="https://scilla-cookbook.org/img/site/meta.jpg?v=1"><meta data-react-helmet="true" name="twitter:image" content="https://scilla-cookbook.org/img/site/meta.jpg?v=1"><meta data-react-helmet="true" property="og:url" content="https://scilla-cookbook.org/recipes/scilla-recipes/mutisignature"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Muti-signature contracts | Scilla Cookbook"><meta data-react-helmet="true" name="description" content="In blockchain-based applications, activities might need to be authorised by multiple blockchain addresses. For example, a monetary transaction may require authorisation from multiple blockchain addresses."><meta data-react-helmet="true" property="og:description" content="In blockchain-based applications, activities might need to be authorised by multiple blockchain addresses. For example, a monetary transaction may require authorisation from multiple blockchain addresses."><link data-react-helmet="true" rel="shortcut icon" href="/img/site/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://scilla-cookbook.org/recipes/scilla-recipes/mutisignature"><link data-react-helmet="true" rel="alternate" href="https://scilla-cookbook.org/recipes/scilla-recipes/mutisignature" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://scilla-cookbook.org/recipes/scilla-recipes/mutisignature" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.3db205b2.css">
<link rel="preload" href="/assets/js/runtime~main.1b404e4a.js" as="script">
<link rel="preload" href="/assets/js/main.03b14034.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/site/scilla-200.png" alt="Community Scilla Cookbook" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/site/scilla-200.png" alt="Community Scilla Cookbook" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">Community Scilla Cookbook</b></a><a href="https://discord.gg/nKznfCaZxy" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://t.me/ZilliqaDevs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Telegram<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://scilla.readthedocs.io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Scilla Docs<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://ide.zilliqa.com/#/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Scilla IDE<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://github.com/Zilliqa/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/Zilliqa/Scilla-by-Example" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Community Cookbook Github<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle toggle_3Zt9 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/">Community Scilla Cookbook</a></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Recipes</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#" tabindex="0">Scilla Recipes</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/recipes/scilla-recipes/addresses">Addresses</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/recipes/scilla-recipes/adt">Algebraic data types</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/recipes/scilla-recipes/bnum">BNum</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/recipes/scilla-recipes/bool">Boolean</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/recipes/scilla-recipes/dex">Decentralised exchange</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/recipes/scilla-recipes/folding">Recursion</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/recipes/scilla-recipes/functions">Functions</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/recipes/scilla-recipes/funds">Funds</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/recipes/scilla-recipes/fungible">Fungible token</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/recipes/scilla-recipes/imports">Imports</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/recipes/scilla-recipes/integer">Integer</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/recipes/scilla-recipes/keywords">Glossary of keywords &amp; conventions</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/recipes/scilla-recipes/list">List</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/recipes/scilla-recipes/map">Maps</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/recipes/scilla-recipes/messages">Messages, callbacks &amp; contract-to-contract interaction</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/recipes/scilla-recipes/metatransactions">Metatransactions</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/recipes/scilla-recipes/mutisignature">Muti-signature contracts</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/recipes/scilla-recipes/natural">Natural numbers</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/recipes/scilla-recipes/nonfungible">Non-fungible token</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/recipes/scilla-recipes/notable-contracts">Notable contracts</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/recipes/scilla-recipes/option">Option</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/recipes/scilla-recipes/pair">Pair</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/recipes/scilla-recipes/pattern_ownership">Pattern (ownership)</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/recipes/scilla-recipes/pattern_proxy">Pattern (proxy)</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/recipes/scilla-recipes/pattern_pushvspush">Pattern (push vs pull)</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/recipes/scilla-recipes/pattern_view">Pattern (viewer)</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/recipes/scilla-recipes/random">Pseudo-random</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/recipes/scilla-recipes/remoteread">Remote state reads</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/recipes/scilla-recipes/safemutiply">Safe multiplication</a></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Interaction Recipes</a></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Side Knowledge</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Tutorials</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD theme-doc-toc-mobile tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Muti-signature contracts</h1></header><p>In blockchain-based applications, activities might need to be authorised by multiple blockchain addresses. For example, a monetary transaction may require authorisation from multiple blockchain addresses.</p><p>All the addresses that can authorise an activity might not be reachable at the time of issuing the transaction due to the sporadic or limited availability of some authorities. Also, it may not be possible to decide on all possible approvers in advance. How can a transaction be authorised by a subset (&gt; 1) of approvers?</p><p><a href="https://github.com/Zilliqa/ZRC/blob/master/zrcs/zrc-4.md" target="_blank" rel="noopener noreferrer">ZRC-4</a> defines the technical specification document that defines the multisignature implementation.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="how-does-it-work"></a>How does it work?<a class="hash-link" href="#how-does-it-work" title="Direct link to heading">#</a></h2><p>This contract holds funds that can be paid out to arbitrary users, provided that enough people in the collection of owners sign off on the payout.</p><p>The transaction must be added to the contract before signatures can be collected. Once enough signatures are collected,the recipient can ask for the transaction to be executed and the money paid out.</p><p>If an owner changes his mind about a transaction, the signature can be revoked until the transaction is executed.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>This wallet does not allow adding or removing owners, or changing the number of required signatures. To do any of those things, read the readme baked into the contract for further information.</p></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="what-could-go-wrong"></a>What could go wrong?<a class="hash-link" href="#what-could-go-wrong" title="Direct link to heading">#</a></h2><div class="admonition admonition-warning alert alert--danger"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>warning</h5></div><div class="admonition-content"><p>If a sufficient number of owners lose their private keys, or for any other reason are unable or unwilling to sign for new transactions, the funds in the wallet will be locked forever. It is therefore a good idea to set required_signatures to a value strictly less than the number of owners, so that the remaining owners can retrieve the funds should such a scenario occur.</p><p>If an owner loses his private key, the remaining owners should move the funds to a new wallet (using the workflow baked into the readme of the contract) to ensure that funds are not locked if another owner loses his private key. The owner who originally lost his private key can generate a new key, and the corresponding address be added to the new wallet, so that the same set of persons own the new wallet.</p></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="zilliqa-multisig"></a>Zilliqa multisig<a class="hash-link" href="#zilliqa-multisig" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="webportal"></a>Webportal<a class="hash-link" href="#webportal" title="Direct link to heading">#</a></h3><p>The <a href="https://multisig.zilliqa.com/" target="_blank" rel="noopener noreferrer">Zilliqa multisig wallet</a> is the easiest way of interfacing using a multisig contract. It provides a user interface over the transitions this contract exposes.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="contract"></a>Contract<a class="hash-link" href="#contract" title="Direct link to heading">#</a></h3><p>ZRC-4 has a reference <a href="https://raw.githubusercontent.com/Zilliqa/ZRC/4e92efd31c5d9a43db8bf5a7d25f7e2916d54c1d/reference/multisig_wallet.scilla" target="_blank" rel="noopener noreferrer">contract</a> that can be examined.</p><p>The contract takes two immutable parameters. One for the List of ByStr20&#x27;s used for signing, and the total number of required signatures needed. The contract then performs some validation to ensure the amount of signatures required is less than or equal to the required amount before continuing to setup the state variables. The state of the multisig is concerned with capturing data relating to signatures, this is used later to check if enough signatures have been added to submit a transaction.</p><p>The contract has logical stubs related to the operation of the multisig.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ocaml"><pre tabindex="0" class="prism-code language-ocaml codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">(* Add signature to signature list *)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">procedure </span><span class="token module variable" style="color:#36acaa">AddSignature</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">transactionId </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token module variable" style="color:#36acaa">Uint32</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> signee </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token module variable" style="color:#36acaa">ByStr20</span><span class="token punctuation" style="color:#393A34">)</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ocaml"><pre tabindex="0" class="prism-code language-ocaml codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">(* Submit a transaction for future signoff *)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">transition </span><span class="token module variable" style="color:#36acaa">SubmitTransaction</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">recipient </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token module variable" style="color:#36acaa">ByStr20</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> amount </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token module variable" style="color:#36acaa">Uint128</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> tag </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token module variable" style="color:#36acaa">String</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">(* Sign off on an existing transaction *)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">transition </span><span class="token module variable" style="color:#36acaa">SignTransaction</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">transactionId </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token module variable" style="color:#36acaa">Uint32</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">(* Delete transaction and signatures *)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">procedure </span><span class="token module variable" style="color:#36acaa">DeleteTransaction</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">transactionId </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token module variable" style="color:#36acaa">Uint32</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">(* Execute signed-off transaction *)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">transition </span><span class="token module variable" style="color:#36acaa">ExecuteTransaction</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">transactionId </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token module variable" style="color:#36acaa">Uint32</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">(* Revoke signature of existing transaction, if it has not yet been executed. *)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">transition </span><span class="token module variable" style="color:#36acaa">RevokeSignature</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">transactionId </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token module variable" style="color:#36acaa">Uint32</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">(* Add funds to wallet *)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">transition </span><span class="token module variable" style="color:#36acaa">AddFunds</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="interaction"></a>Interaction<a class="hash-link" href="#interaction" title="Direct link to heading">#</a></h3><p>ZRC-4 has a reference <a href="https://github.com/Zilliqa/ZRC/tree/4e92efd31c5d9a43db8bf5a7d25f7e2916d54c1d/example/zrc4" target="_blank" rel="noopener noreferrer">interaction</a> library that can be used if users wanted to deploy or use the multisig without interacting through the UI or IDE.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="testing-the-zilliqa-multisig"></a>Testing the Zilliqa multisig<a class="hash-link" href="#testing-the-zilliqa-multisig" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="setup"></a>Setup<a class="hash-link" href="#setup" title="Direct link to heading">#</a></h3><ul><li><p>Create three wallets (say A, B, C) using the <a href="https://dev-wallet.zilliqa.com/generate" target="_blank" rel="noopener noreferrer">dev wallet generator</a>, store the corresponding keystore files on your machine and note the BECH32(zil...) addresses. (you can import keystores into Zilpay at a later convenience)</p></li><li><p>Request testnet Zil for these addresses <a href="https://dev-wallet.zilliqa.com/faucet" target="_blank" rel="noopener noreferrer">via the faucet</a>.</p></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="deployment-via-ui"></a>Deployment via UI<a class="hash-link" href="#deployment-via-ui" title="Direct link to heading">#</a></h3><ul><li><p>Login to the multisig wallet portal using the keystore for address A. Deploy a multisig wallet in a 2 out of 3 mode (i.e., funds from the multisig wallet can be transferred only when 2 out of 3 wallets have signed off).</p></li><li><p>Use addresses corresponding to A, B and C (from Step 1) as the owner of the multisig wallet. Owners are the ones who can sign off a payment. Once deployed, save the multisig contract address for further testing.</p></li><li><p>Once the multisig wallet is deployed, you will have to add funds to the contract. For this, go to the multisig wallet interface and click Add Funds button from the right-hand panel. Add funds to the multisig wallet using the funds from address A using the UI.</p></li></ul><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>You cannot send funds to the contract address through Zilpay, it returns the error: <code>contract account wont accept normal transactions</code></p><p>Note the transition for accepting payments in the contract transition stubs as an alternative.</p></div></div><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>There is not a multisignature contract that currently accepts ZRC-2 tokens</p></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="approve-a-transaction"></a>Approve a transaction<a class="hash-link" href="#approve-a-transaction" title="Direct link to heading">#</a></h3><ul><li><p>Letâ€™s say you want to pay 5 Zil to account C via the multisig wallet. In order to do this, log in the multisig wallet using account A. And click Transaction from the right-hand panel. Fill in the recipient address and the amount and send the transaction.</p></li><li><p>Since it is a multisig wallet, any transfer of money from the wallet will require 2 out of 3 sign offs. Since A submitted the transaction, it is counted as a sign off. We now need either B or C to sign off.</p></li><li><p>Log in to the multisig wallet using account B, import the multisig wallet by providing the multisig wallet address (from Step 3.) Once the wallet is imported, you can click sign to sign of this transaction. Do check the transaction details.</p></li><li><p>Once the two signatures are obtained, you can use account B to execute the transaction. Execution is the final step in the transfer process and it will transfer 5 Zil to C.</p></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="further-reading"></a>Further reading<a class="hash-link" href="#further-reading" title="Direct link to heading">#</a></h2><p><a href="https://research.csiro.au/blockchainpatterns/general-patterns/security-patterns/multiple-authorization/" target="_blank" rel="noopener noreferrer">Multisignature</a></p><p><a href="https://github.com/Zilliqa/ZRC/blob/4e92efd31c5d9a43db8bf5a7d25f7e2916d54c1d/zrcs/zrc-4.md" target="_blank" rel="noopener noreferrer">ZRC-4 Specification</a></p><p><a href="https://github.com/Zilliqa/ZRC/tree/4e92efd31c5d9a43db8bf5a7d25f7e2916d54c1d/example/zrc4" target="_blank" rel="noopener noreferrer">ZRC-4 Interaction</a></p><p><a href="https://multisig.zilliqa.com/" target="_blank" rel="noopener noreferrer">Zilliqa Multisignature Wallet UI</a></p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-tags-row row margin-bottom--sm"><div class="col"><b>Tags:</b><ul class="tags_2ga9 padding--none margin-left--sm"><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/tags/mutisignature">mutisignature</a></li><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/tags/mutisig">mutisig</a></li><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/tags/contract">contract</a></li><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/tags/reference">reference</a></li><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/tags/zrc-4">zrc4</a></li></ul></div></div><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/Zilliqa/Scilla-Cookbook/tree/master/docs/recipes/scilla-recipes/mutisignature.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_13-_"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/recipes/scilla-recipes/metatransactions"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Metatransactions</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/recipes/scilla-recipes/natural"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Natural numbers Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#how-does-it-work" class="table-of-contents__link">How does it work?</a></li><li><a href="#what-could-go-wrong" class="table-of-contents__link">What could go wrong?</a></li><li><a href="#zilliqa-multisig" class="table-of-contents__link">Zilliqa multisig</a><ul><li><a href="#webportal" class="table-of-contents__link">Webportal</a></li><li><a href="#contract" class="table-of-contents__link">Contract</a></li><li><a href="#interaction" class="table-of-contents__link">Interaction</a></li></ul></li><li><a href="#testing-the-zilliqa-multisig" class="table-of-contents__link">Testing the Zilliqa multisig</a><ul><li><a href="#setup" class="table-of-contents__link">Setup</a></li><li><a href="#deployment-via-ui" class="table-of-contents__link">Deployment via UI</a></li><li><a href="#approve-a-transaction" class="table-of-contents__link">Approve a transaction</a></li></ul></li><li><a href="#further-reading" class="table-of-contents__link">Further reading</a></li></ul></div></div></div></div></main></div></div></div>
<script src="/assets/js/runtime~main.1b404e4a.js"></script>
<script src="/assets/js/main.03b14034.js"></script>
</body>
</html>