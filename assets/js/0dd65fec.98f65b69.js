"use strict";(self.webpackChunkdocu_scilla=self.webpackChunkdocu_scilla||[]).push([[3911],{3905:function(e,t,r){r.d(t,{Zo:function(){return u},kt:function(){return h}});var n=r(7294);function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var s=n.createContext({}),c=function(e){var t=n.useContext(s),r=t;return e&&(r="function"==typeof e?e(t):i(i({},t),e)),r},u=function(e){var t=c(e.components);return n.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},p=n.forwardRef((function(e,t){var r=e.components,o=e.mdxType,a=e.originalType,s=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),p=c(r),h=o,m=p["".concat(s,".").concat(h)]||p[h]||d[h]||a;return r?n.createElement(m,i(i({ref:t},u),{},{components:r})):n.createElement(m,i({ref:t},u))}));function h(e,t){var r=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=r.length,i=new Array(a);i[0]=p;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:o,i[1]=l;for(var c=2;c<a;c++)i[c]=r[c];return n.createElement.apply(null,i)}return n.createElement.apply(null,r)}p.displayName="MDXCreateElement"},1984:function(e,t,r){r.r(t),r.d(t,{frontMatter:function(){return l},contentTitle:function(){return s},metadata:function(){return c},toc:function(){return u},default:function(){return p}});var n=r(7462),o=r(3366),a=(r(7294),r(3905)),i=["components"],l={tags:["error","transaction"]},s="Transaction errors and troubleshooting",c={unversionedId:"side-knowledge/troubleshooting",id:"side-knowledge/troubleshooting",isDocsHomePage:!1,title:"Transaction errors and troubleshooting",description:"Why does my transaction error?",source:"@site/docs/side-knowledge/troubleshooting.md",sourceDirName:"side-knowledge",slug:"/side-knowledge/troubleshooting",permalink:"/Scilla-Cookbook-1/side-knowledge/troubleshooting",editUrl:"https://github.com/Zilliqa/Scilla-Cookbook/tree/master/docs/side-knowledge/troubleshooting.md",tags:[{label:"error",permalink:"/Scilla-Cookbook-1/tags/error"},{label:"transaction",permalink:"/Scilla-Cookbook-1/tags/transaction"}],version:"current",frontMatter:{tags:["error","transaction"]},sidebar:"tutorialSidebar",previous:{title:"Scilla test suite",permalink:"/Scilla-Cookbook-1/side-knowledge/scilla-test-suite"},next:{title:"Vanity addresses",permalink:"/Scilla-Cookbook-1/side-knowledge/vanity"}},u=[{value:"Why does my transaction error?",id:"why-does-my-transaction-error",children:[]},{value:"Typical Errors",id:"typical-errors",children:[{value:"Failed to parse json",id:"failed-to-parse-json",children:[]},{value:"No parameter found matching message entry xxx",id:"no-parameter-found-matching-message-entry-xxx",children:[]},{value:"&quot;JSON_OUTPUT_CORRUPTED&quot;,&quot;CHECKER_FAILED&quot;",id:"json_output_corruptedchecker_failed",children:[]},{value:"To Addr checksum wrong",id:"to-addr-checksum-wrong",children:[]},{value:"Ran out of gas after evaluating statement",id:"ran-out-of-gas-after-evaluating-statement",children:[]},{value:"xxx type not allowed in JSON file",id:"xxx-type-not-allowed-in-json-file",children:[]}]},{value:"Further reading",id:"further-reading",children:[]}],d={toc:u};function p(e){var t=e.components,l=(0,o.Z)(e,i);return(0,a.kt)("wrapper",(0,n.Z)({},d,l,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"transaction-errors-and-troubleshooting"},"Transaction errors and troubleshooting"),(0,a.kt)("h2",{id:"why-does-my-transaction-error"},"Why does my transaction error?"),(0,a.kt)("p",null,"This could be for a number of issues. Firstly, read and understand the error."),(0,a.kt)("p",null,"Lets take the below example where a user is trying to interface with Zilswap dex."),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"Docusaurus",src:r(5165).Z})),(0,a.kt)("p",null,"Firstly, we can see the transition with the passed variables variables, and below that we can see the exception stack trace."),(0,a.kt)("p",null,"The error thrown reads ",(0,a.kt)("inlineCode",{parentName:"p"},'Exception thrown: (Message [(_exception : (String "RequestedRatesCannotBeFulfilled"))]) :1')),(0,a.kt)("p",null,"If errors are well defined, it may be easy to spot what the problem is, in our case we do not know what ",(0,a.kt)("inlineCode",{parentName:"p"},"RequestedRatesCannotBeFulfilled")," means."),(0,a.kt)("p",null,"This is a contract specific error and we will need to look at the Zilswap Dex contract to learn more."),(0,a.kt)("p",null,"Once we've searched the Zilswap Dex contract for the phrase ",(0,a.kt)("inlineCode",{parentName:"p"},"RequestedRatesCannotBeFulfilled")," we find it posted in three places."),(0,a.kt)("p",null,"The first two do not concern us, as these are around ",(0,a.kt)("inlineCode",{parentName:"p"},"AddLiquidity")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"RemoveLiquidity"),"."),(0,a.kt)("p",null,"The third and final place its mentioned is in the library function ",(0,a.kt)("inlineCode",{parentName:"p"},"resultFor"),"."),(0,a.kt)("p",null,"We can find ",(0,a.kt)("inlineCode",{parentName:"p"},"resultFor")," used in most of the swap transitions including our transition call ",(0,a.kt)("inlineCode",{parentName:"p"},"SwapExactTokensForZIL"),"."),(0,a.kt)("p",null,"We have traced the error back to this particular logical block."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ocaml"},'  let within_limits = withinLimits amount maybe_limit_amount exact_side in\n  match within_limits with\n  | False =>\n     let e = "RequestedRatesCannotBeFulfilled" in Error e\n  | True =>\n     Result pool amount\n  end \n')),(0,a.kt)("p",null,"We can further extrapolate on the intermediately proceeding code that this logical block is dealing with swapping user tokens against the liquidity pool - this error is returned when either the price moves and the amount of slippage determines that the trade calculation would not have enough tokens to proceed and therefore throws this error."),(0,a.kt)("h2",{id:"typical-errors"},"Typical Errors"),(0,a.kt)("p",null,"A non exhausted list of errors and some tips for working a resolution."),(0,a.kt)("h3",{id:"failed-to-parse-json"},"Failed to parse json"),(0,a.kt)("p",null,"Input passed wasn't in the expected shape, print the request and parameters and check what's being passed and what types are present."),(0,a.kt)("h3",{id:"no-parameter-found-matching-message-entry-xxx"},"No parameter found matching message entry xxx"),(0,a.kt)("p",null,"A transition or procedure is expecting a parameter which is missing, is your call passing this data in the expected order? This error can also be thrown on callbacks."),(0,a.kt)("h3",{id:"json_output_corruptedchecker_failed"},'"JSON_OUTPUT_CORRUPTED","CHECKER_FAILED"'),(0,a.kt)("p",null,"Check your initialisation parameters are valid."),(0,a.kt)("h3",{id:"to-addr-checksum-wrong"},"To Addr checksum wrong"),(0,a.kt)("p",null,"Base16 addresses use uppercase and lowercase letters to be used as a checksum, the address still works as a public key in all lowercase or uppercase but then the checksum is invalid - try making the string lowercase."),(0,a.kt)("h3",{id:"ran-out-of-gas-after-evaluating-statement"},"Ran out of gas after evaluating statement"),(0,a.kt)("p",null,"Increase your gas limit."),(0,a.kt)("h3",{id:"xxx-type-not-allowed-in-json-file"},"xxx type not allowed in JSON file"),(0,a.kt)("p",null,"Check the types in your request to what's on the contract."),(0,a.kt)("h2",{id:"further-reading"},"Further reading"),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://viewblock.io/zilliqa/address/zil1gkwt95a67lnpe774lcmz72y6ay4jh2asmmjw6u?tab=code"},"Zilswap Dex contract - L165")))}p.isMDXComponent=!0},5165:function(e,t,r){t.Z=r.p+"assets/images/troubleshooting-1-305c3ff4f478193d30cf53d5e2b68f64.png"}}]);